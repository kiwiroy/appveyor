
install:
  - set "PATH=C:\msys64\usr\bin;C:\msys64\mingw64\bin;C:\Windows\System32;C:\Windows;%PATH%"
  - set MSYSTEM=MINGW64
  - pacman --noconfirm -Sy
  - pacman --noconfirm --needed -S pacman-mirrors
  - pacman --noconfirm -Sy
  - pacman --noconfirm --needed -S base-devel git zip mingw-w64-x86_64-openssl mingw-w64-x86_64-toolchain
  - ps: >-
      bash -c @"
        exec 0</dev/null 2>&1
        git clone https://github.com/kiwiroy/openssl.git
        cd openssl
      "@

build_script:
    - ps: >-
        bash -c @"
          set -e
          # stdin seems to be invalid on appveyor, so set it to null
          exec 0</dev/null 2>&1
          pwd
          cd openssl
          ./Configure mingw64 no-shared
          make
        "@

test_script:
  - set
  - env
